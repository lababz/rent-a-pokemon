<div class="container my-5">
  <div class="booking-container mb-5">

    <div id="carouselShowPokemon" class="carousel slide">
      <div class="carousel-inner">
        <% @pokemon.images.each_with_index do |image, index| %>
          <div class="carousel-item <%= index == 0 ? 'active' : '' %>">
            <%= cl_image_tag image.key, crop: :fill, class: "card pokemon-card-img-booking" %>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselShowPokemon" data-bs-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Previous</span>
            </button>
          <button class="carousel-control-next" type="button" data-bs-target="#carouselShowPokemon" data-bs-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
        <% end %>
      </div>
    </div>

    <div class="card booking-main">

      <div class="pokemon-details mb-0">
        <h1>Reserve <%= @pokemon.name %></h1>
        <h3><strong>Type:</strong> <%= @pokemon.pokemon_type %></h3>
        <p>ℹ️ <%= @pokemon.description %></p>
        <p>📍 <%= @pokemon.location %></p>
        <p>🧍 <%= @pokemon.user.email %></p>
        <p>🗓️ Du <%= @booking.start_date %> au <%= @booking.end_date %></p>
        <p>🕝 <%= duration_in_days(@booking.start_date, @booking.end_date) %> jours</p>
        <% if @booking.reviews.empty? %>
          <button class="btn-add-review">Laisse un avis</button>
        <% else %>
          <p>🌟 <%= @booking.review.rating %>/5</p>
        <% end %>
      </div>

        <div class="booking-price-show">
          <p>Tarif à la journée: <span id="pricePerDay"><%= @pokemon.price %></span>€
          <br><strong>Prix total: <%= @pokemon.price * duration_in_days(@booking.start_date, @booking.end_date) %> €</strong></p>
        </div>
    </div>
  </div>

  <!-- Map -->
  <div class="card map-container mb-5" data-controller="map" data-map-marker-value="<%= @marker.to_json %>" data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"><%= image_tag "logo.png", height: 30, width: 30, alt: "Logo" %></div>

  <!-- Reviews -->
  <div class="card booking-review">
    <% if @booking.reviews.empty? %>
      <h3>Es-tu satisfait de <%= @pokemon.name %> ? Laisse ton avis !</h3>
      <button class="btn-add-review">Laisse un avis</button>
    <% else %>
      <p>🌟 <%= @booking.review.rating %>/5</p>
    <% end %>
  </div>

</div>
